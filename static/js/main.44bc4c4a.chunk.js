(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(32),r=a.n(i),o=(a(65),a(7)),l=a(2),c=a(3),u=a(5),h=a(4),d=a(6),p=a(33),m=a.n(p),g=(a(112),a(114),{apiKey:"AIzaSyBo6CZWAvg8VUm_8bCOekfLWrafNAx16Fw",authDomain:"sharks-repertoire.firebaseapp.com",databaseURL:"https://sharks-repertoire.firebaseio.com",projectId:"sharks-repertoire",storageBucket:"sharks-repertoire.appspot.com",messagingSenderId:"355114391613"}),v=function e(){var t=this;Object(l.a)(this,e),this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.getSongs=function(){return t.db.ref("songs").once("value").then(function(e){return e.val()})},this.doCreateSong=function(e){t.db.ref().child("songs").push(e)},this.doCreateGig=function(e){return t.db.ref().child("gigs").push(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},m.a.initializeApp(g),this.auth=m.a.auth(),this.db=m.a.database()},f=function(e){var t=e.onClickNav,a=e.tab;return n.a.createElement("nav",{className:"fontMetal"},n.a.createElement("h1",{className:"hideForS"},"sharkApp"),n.a.createElement("button",{onClick:t,value:"songs",className:"songs"===a?"active":""},"Songs"),n.a.createElement("button",{onClick:t,value:"gigs",className:"gigs"===a?"active":""},"Gigs"),n.a.createElement("button",{onClick:t,value:"sharks",className:"sharks"===a?"active":""},"Sharks"))},b=function(){return n.a.createElement("main",{className:"loaderWrapper fontMetal"},n.a.createElement("h1",{className:"loadingH1"},"Barnyard Sharks"),n.a.createElement("p",{className:"loadingTag"},"Are Coming For You",n.a.createElement("span",{className:"blink"},"...")))},S=a(8);var E=function(e){return function(t){function a(){var e,t;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(h.a)(a)).call.apply(e,[this].concat(n)))).state={shouldRender:t.props.isMounted,isUnmounting:!1},t}return Object(d.a)(a,t),Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;e.isMounted&&!this.props.isMounted?(this.setState({isUnmounting:!0}),setTimeout(function(){return t.setState({shouldRender:!1})},this.props.delayTime)):!e.isMounted&&this.props.isMounted&&this.setState({shouldRender:!0,isUnmounting:!1})}},{key:"render",value:function(){return this.state.shouldRender?n.a.createElement(e,Object.assign({isUnmounting:this.state.isUnmounting},this.props)):null}}]),a}(n.a.Component)},k=function(e){var t=e.handleExit,a=e.children,s=e.isUnmounting,i=e.classNames,r="".concat(i,s?" DetailWrapper slideOut":" DetailWrapper"),o=s?"halfModalBG fadeOut":"halfModalBG";return n.a.createElement("div",{className:o,onClick:t},n.a.createElement("div",{className:r},a))},C=function(e){var t=e.isEdit,a=e.className,s=e.title,i=e.handleCreate,r=e.handleEdit,o=e.createValidation,l=e.editValidation;return n.a.createElement(n.a.Fragment,null,t?n.a.createElement("button",{className:"button ".concat(a),onClick:r,disabled:!l},"save edits"):n.a.createElement("button",{className:"button ".concat(a),onClick:i,disabled:!o},"create new ",s))},y=document.getElementById("modal"),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).el=document.createElement("div"),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){y.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){y.removeChild(this.el)}},{key:"render",value:function(){return r.a.createPortal(this.props.children,this.el)}}]),t}(n.a.Component),D=function(e){var t=e.sharks,a=e.checkedCondition,s=e.handleChange,i=e.children,r=Object.entries(t.active).map(function(e){var t=new RegExp(e[0]),i=t.test(a)?"active ":"";return i+="label songVocalistOption",n.a.createElement("label",{key:e[0],className:i},e[1].name,n.a.createElement("input",{key:e[0],type:"checkbox",checked:t.test(a),value:e[0],className:"input",onChange:s}))});return i&&r.push(i),r},O=a(59),w=function(e){var t=e.isOpen,a=e.filterByStatus,i=e.filterByVocals,r=e.onToggleFilter,o=e.statusFilter,l=e.vocalsFilter,c=e.sharksFilter,u=e.handleSharksFilter,h=e.handleCoverFilter,d=e.isCover,p=e.sortType,m=e.onSort,g=e.sharks,v=Object(s.useState)("status"),f=Object(O.a)(v,2),b=f[0],S=f[1],E=function(e){S(e.target.value)},k=function(e){if(g.active)return g.active[e].name},C=function(e,t){return b===e?"active":t?"semiActive":""};return n.a.createElement("div",{className:t?"filterWrapper":"filterWrapper hideFilter"},n.a.createElement("div",{className:"filterSelectorWrapper"},n.a.createElement("h3",null,"FILTER"),n.a.createElement("nav",null,n.a.createElement("button",{type:"button",id:"status",onClick:E,className:C("status",o),value:"status"},"Status"),n.a.createElement("button",{type:"button",id:"vocals",onClick:E,className:C("vocals",l),value:"vocals"},"Vox"),n.a.createElement("button",{type:"button",id:"covers",onClick:E,className:C("sharks",c),value:"sharks"},"Sharks")),n.a.createElement("div",{id:"statusWrapper",className:"status"===b?"":"hide"},n.a.createElement("button",{type:"button",onClick:a,className:"solid"===o?"active":"",value:"solid"},"Solid"),n.a.createElement("button",{type:"button",onClick:a,className:"shakey"===o?"active":"",value:"shakey"},"Shakey"),n.a.createElement("button",{type:"button",onClick:a,className:"inactive"===o?"active":"",value:"inactive"},"Inactive"),n.a.createElement("button",{type:"button",onClick:a,className:"retired"===o?"active":"",value:"retired"},"Retired"),n.a.createElement("button",{type:"button",onClick:a,className:"idea"===o?"active":"",value:"idea"},"Ideas")),n.a.createElement("div",{id:"sharksWrapper",className:"sharks"===b?"sharkSort":"hide"},n.a.createElement("h4",null,"Who is ",n.a.createElement("i",null,"not")," here?"),n.a.createElement(D,{sharks:g,handleChange:u,checkedCondition:c})),n.a.createElement("div",{id:"vocalsWrapper",className:"vocals"===b?"":"hide"},n.a.createElement("button",{type:"button",onClick:i,value:"05x2qzOXABfcDkMGTClzDZxzBBt2",className:"05x2qzOXABfcDkMGTClzDZxzBBt2"===l?"active":""},k("05x2qzOXABfcDkMGTClzDZxzBBt2")),n.a.createElement("button",{type:"button",onClick:i,value:"r6hSiQpBaNfqiPgKatywDJCDRL13",className:"r6hSiQpBaNfqiPgKatywDJCDRL13"===l?"active":""},k("r6hSiQpBaNfqiPgKatywDJCDRL13")),n.a.createElement("button",{type:"button",onClick:i,value:"fUek7qwanvg3Sp8BJlp0NLswllO2",className:"fUek7qwanvg3Sp8BJlp0NLswllO2"===l?"active":""},k("fUek7qwanvg3Sp8BJlp0NLswllO2")),n.a.createElement("button",{type:"button",onClick:i,value:"gang",className:"gang"===l?"active":""},"Gang"),n.a.createElement("button",{type:"button",onClick:i,value:"instrumental",className:"instrumental"===l?"active":""},"Instrumental"))),n.a.createElement("div",{className:"filterSort"},n.a.createElement("h3",null,"Sort"),n.a.createElement("button",{type:"button",value:"newest",onClick:m,className:"newest"===p?"active":""},"New"),n.a.createElement("button",{type:"button",value:"oldest",onClick:m,className:"oldest"===p?"active":""},"Old"),n.a.createElement("h3",null,"HIDE"),n.a.createElement("button",{id:"covers",onClick:h,className:d?"":"active",type:"button"},"Covers")),n.a.createElement("button",{type:"button",onClick:r,className:t?"filterHide":"filterHide flipRotate"},"^"))},j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={displayedSongs:[],statusFilter:"",vocalsFilter:"",sharksFilter:"",sortType:"",isCover:!1,isFilterShowing:!0},a.filterByStatus=function(e){var t=a.state.statusFilter===e.target.value?"":e.target.value;a.setState({statusFilter:t},a.displaySongs)},a.filterByVocals=function(e){var t=a.state.vocalsFilter===e.target.value?"":e.target.value;a.setState({vocalsFilter:t},a.displaySongs)},a.onSort=function(e){e.target.value!==a.state.sortType?a.setState({sortType:e.target.value},a.displaySongs):a.setState({sortType:""},a.displaySongs)},a.onToggleFilter=function(){a.setState(function(e){return{isFilterShowing:!e.isFilterShowing}})},a.handleCoverFilter=function(){a.setState(function(e){return{isCover:!e.isCover}},a.displaySongs)},a.handleSharksFilter=function(e){var t=e.target.value,s=a.state.sharksFilter;if(e.target.checked)a.setState({sharksFilter:s?"".concat(s,", ").concat(t):t},a.displaySongs);else if(!e.target.checked){if(new RegExp(",").test(s)){var n=s.split(", ");n.splice(n.indexOf(t),1),s=n.join(", ")}else s="";a.setState({sharksFilter:s},a.displaySongs)}},a.displaySongs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.songs,t=a.state,s=t.statusFilter,n=t.vocalsFilter,i=t.sharksFilter,r=t.sortType,o=t.isCover,l=Object.values(e);if(o||(l=l.filter(function(e){return void 0===e.isCover||!1===e.isCover})),i){var c=i.split(", ");l=l.filter(function(e){var t=!0;return c.forEach(function(a){new RegExp(a).test(e.reqSharks)&&(t=!1)}),t})}if(s&&(l=l.filter(function(e){return e.status===s})),n){var u=new RegExp(n);l=l.filter(function(e){return u.test(e.vox)})}r?"newest"===r?l=l.sort(function(e,t){return t.dob-e.dob}):"oldest"===r&&(l=l.sort(function(e,t){return e.dob-t.dob})):l=l.sort(function(e,t){return e.name.toUpperCase()>t.name.toUpperCase()?1:-1}),a.setState({displayedSongs:l})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.displaySongs(),this.props.isFilterShowing||this.setState({isFilterShowing:!1})}},{key:"componentWillUpdate",value:function(e,t){Object.values(e.songs).length!==Object.values(this.props.songs).length&&this.displaySongs(e.songs)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:this.props.className||"mainWrapper"},n.a.createElement("ul",{className:"AllSongs"},this.state.displayedSongs.map(function(t){return n.a.createElement("li",{key:t.name},n.a.createElement("button",{type:"button",onClick:e.props.onClick,className:e.props.detailedSong===t?"active":""},t.name))})),n.a.createElement(w,{handleCoverFilter:this.handleCoverFilter,isCover:this.state.isCover,isOpen:this.state.isFilterShowing,onToggleFilter:this.onToggleFilter,filterByStatus:this.filterByStatus,filterByVocals:this.filterByVocals,statusFilter:this.state.statusFilter,handleSharksFilter:this.handleSharksFilter,vocalsFilter:this.state.vocalsFilter,sharksFilter:this.state.sharksFilter,onSort:this.onSort,sortType:this.state.sortType,sharks:this.props.sharks}))}}]),t}(n.a.Component),x={audio:"",dob:0,dobInput:"",hasChanged:!1,name:"",status:"",vox:"",lyrics:"",reqSharks:"",isCover:!1,isVocalEdit:!1,isReqSharksEdit:!1,error:""},U=E(function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state=Object(o.a)({},x),a.processAudioEmbed=function(){var e,t=a.state.newAudio;if(/bandcamp/i.test(t))e="bandcamp";else{if(!/soundcloud/i.test(t))return"invalid embed";e="soundcloud"}var s=/tracks?[=\/](\d+)/.exec(t)[1];a.setState({audio:{host:e,trackID:s}})},a.renderAudio=function(){if(a.state.audio){if("soundcloud"===a.state.audio.host){var e="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/".concat(a.state.audio.trackID,"&color=%23ff5500&auto_play=false&hide_related=false&show_comments=false&show_user=false&show_reposts=false&show_teaser=false");return n.a.createElement("iframe",{title:"soundcloud",src:e})}var t="https://bandcamp.com/EmbeddedPlayer/size=small/bgcol=ffffff/linkcol=0687f5/track=".concat(a.state.audio.trackID,"/transparent=true/");return n.a.createElement("iframe",{title:"bandcamp",src:t},n.a.createElement("p",null,a.state.name))}return a.props.authUser?n.a.createElement("form",{className:"audioForm",onSubmit:a.processAudioEmbed},n.a.createElement("label",{className:"label audio"},"audio",n.a.createElement("input",{disabled:!a.props.authUser,placeholder:"enter entire embed code",name:"newAudio",onChange:a.onChange,value:a.state.newAudio,className:"input"}))):void 0},a.onChange=function(e){var t;a.setState((t={},Object(S.a)(t,e.target.name,e.target.value),Object(S.a)(t,"hasChanged",!0),Object(S.a)(t,"error",""),t))},a.onEdit=function(){var e=a.state,t=e.audio,s=e.dob,n=e.name,i=e.status,r=e.vox,o=e.isCover,l=e.lyrics,c=e.reqSharks,u=Object.entries(a.props.songs),h=!0;u.forEach(function(e){e[1].name===n&&e[0]!==a.props.songId&&(a.setState({error:"song names must be unique"}),h=!1)}),h&&(a.props.firebase.db.ref("songs/".concat(a.props.songId)).update({audio:t,dob:s,name:n,status:i,vox:r,isCover:o,lyrics:l,reqSharks:c}),a.setState({hasChanged:!1}))},a.onCreate=function(){var e={audio:a.state.audio||"",vox:a.state.vox,dob:a.state.dob,status:a.state.status,name:a.state.name,isCover:a.state.isCover,lyrics:a.state.lyrics,reqSharks:a.state.reqSharks};void 0===Object.values(a.props.songs).map(function(e){return e.name}).filter(function(t){return t===e.name})[0]?(a.props.firebase.doCreateSong(e),a.props.exit()):a.setState({error:"song names must be unique"})},a.processDate=function(e){if(""===e)return"";if("string"===typeof e)return new Date(e).getTime();if("number"===typeof e){var t=new Date(e),a=t.getMonth()+1;a=1===a.toString().length?"0"+a:a;var s=t.getFullYear(),n=t.getDate();return n=1===n.toString().length?"0"+n:n,"".concat(a,"/").concat(n,"/").concat(s)}},a.onDateChange=function(e){if(/^[0-1][0-9]\/[0-3][0-9]\/[1-2][0-9][0-9][0-9]$/.test(e.target.value)){var t=a.processDate(e.target.value);a.setState({dob:t,hasChanged:!0})}else a.setState({dob:"",dobInput:e.target.value})},a.onBoolChange=function(e){a.setState({hasChanged:!0,isCover:!!e.target.checked})},a.closeModal=function(e){console.log(e.target),e?e.target===document.querySelector(".modalBG")&&a.setState({isLyricDisplay:!1,isReqSharksEdit:!1,isVocalEdit:!1}):a.setState({isLyricDisplay:!1,isReqSharksEdit:!1,isVocalEdit:!1})},a.handleReqSharksChange=function(e){var t=e.target.value,s=a.state.reqSharks;if(e.target.checked)a.setState({reqSharks:s?"".concat(s,", ").concat(t):t,hasChanged:!0});else if(!e.target.checked){if(new RegExp(",").test(s)){var n=s.split(", ");n.splice(n.indexOf(t),1),s=n.join(", ")}else s="";a.setState({reqSharks:s,hasChanged:!0})}},a.handleVoxChange=function(e){var t=e.target.value,s=a.state.vox;if("instrumental"===t&&e.target.checked)a.setState({vox:"instrumental",hasChanged:!0});else if(e.target.checked)"instrumental"===s?a.setState({vox:t,hasChanged:!0}):a.setState({vox:s?"".concat(s,", ").concat(t):t,hasChanged:!0});else if(!e.target.checked){if(new RegExp(",").test(s)){var n=s.split(", ");n.splice(n.indexOf(t),1),s=n.join(", ")}else s="";a.setState({vox:s,hasChanged:!0})}},a.processVox=function(){if(""===a.state.vox)return"";var e=a.state.vox.split(", "),t=[];return e.forEach(function(e){if("instrumental"!==e&&"gang"!==e){var s=Object.entries(a.props.sharks.active).filter(function(t){return t[0]===e})[0][1].name;t.push(s)}else t.push(e)}),t.join(", ")},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({audio:this.props.song.audio||"",dob:this.props.song.dob,name:this.props.song.name,vox:this.props.song.vox,status:this.props.song.status,isCover:this.props.song.isCover||!1,lyrics:this.props.song.lyrics||"",reqSharks:this.props.song.reqSharks||""})}},{key:"render",value:function(){var e=this;return n.a.createElement(k,{handleExit:this.props.exit,classNames:"songWrapper",isUnmounting:this.props.isUnmounting},this.state.error&&n.a.createElement("p",{className:"red"},this.state.error),n.a.createElement("label",{className:"label songName"},"name",n.a.createElement("input",{disabled:!this.props.authUser,name:"name",onChange:this.onChange,value:this.state.name,className:"input"})),n.a.createElement("label",{className:"label songDate"},"date of birth",n.a.createElement("input",{disabled:!this.props.authUser,name:"dob",onChange:this.onDateChange,value:this.processDate(this.state.dob)||this.state.dobInput,className:"input",placeholder:"mm/dd/yyyy"})),n.a.createElement("label",{className:"label songStatus"},"status",n.a.createElement("select",{disabled:!this.props.authUser,name:"status",onChange:this.onChange,value:this.state.status,className:"input"},n.a.createElement("option",{value:"solid"},"solid"),n.a.createElement("option",{value:"shakey"},"shakey"),n.a.createElement("option",{value:"inactive"},"inactive"),n.a.createElement("option",{value:"retired"},"retired"),n.a.createElement("option",{value:"idea"},"idea"))),n.a.createElement("button",{className:"label songVocalist",disabled:!this.props.authUser,onClick:function(){return e.setState({isVocalEdit:!0})}},n.a.createElement("span",null,"vocalist"),n.a.createElement("p",{className:"input"},this.processVox())),this.state.isVocalEdit&&n.a.createElement(N,null,n.a.createElement("div",{className:"modalBG",onClick:this.closeModal},n.a.createElement("div",{className:"modalSelectWrapper"},n.a.createElement(D,{checkedCondition:this.state.vox,handleChange:this.handleVoxChange,sharks:this.props.sharks},n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{key:"gang",className:/gang/.test(this.state.vox)?"label songVocalistOption active":"label songVocalistOption"},"gang",n.a.createElement("input",{type:"checkbox",value:"gang",checked:/gang/.test(this.state.vox),className:"input",onChange:this.handleVoxChange})),n.a.createElement("label",{key:"instrumental",className:/instrumental/.test(this.state.vox)?"label songVocalistOption active":"label songVocalistOption"},"instrumental",n.a.createElement("input",{type:"checkbox",checked:/instrumental/.test(this.state.vox),value:"instrumental",className:"input",onChange:this.handleVoxChange}))))))),this.renderAudio(),n.a.createElement("button",{className:this.state.lyrics?"label songLyrics hasContent":"label songLyrics",onClick:function(){return e.setState({isLyricDisplay:!0})}},n.a.createElement("span",null,this.state.lyrics?"":"Add "," Lyrics")),n.a.createElement("label",{className:"songCover"},this.state.isCover?"cover":"original",n.a.createElement("input",{type:"checkbox",disabled:!this.props.authUser,name:"isCover",onChange:this.onBoolChange,checked:this.state.isCover})),n.a.createElement("button",{className:this.state.reqSharks?"label songRequired hasContent":"label songRequired",disabled:!this.props.authUser,onClick:function(){return e.setState(function(e){return{isReqSharksEdit:!e.isReqSharksEdit}})}},n.a.createElement("span",null,"Required Sharks")),this.state.isReqSharksEdit&&n.a.createElement(N,null,n.a.createElement("div",{className:"modalBG",onClick:this.closeModal},n.a.createElement("div",{className:"modalSelectWrapper"},n.a.createElement("h3",null,"WHO IS REQUIRED"),n.a.createElement(D,{checkedCondition:this.state.reqSharks,handleChange:this.handleReqSharksChange,sharks:this.props.sharks})))),this.props.authUser&&n.a.createElement(C,{isEdit:!!this.props.songId,className:"songSubmit",title:"song",handleCreate:this.onCreate,handleEdit:this.onEdit,createValidation:this.state.name,editValidation:this.state.hasChanged}),this.state.isLyricDisplay&&n.a.createElement(N,null,n.a.createElement("div",{className:"modalBG",onClick:this.closeModal},n.a.createElement("label",{className:"label songLyricsModal"},"lyrics",n.a.createElement("textarea",{disabled:!this.props.authUser,readOnly:!this.props.authUser,name:"lyrics",className:"input",onChange:this.onChange,value:this.state.lyrics})))),n.a.createElement("button",{onClick:this.props.exit,className:"button exit"},">"))}}]),t}(n.a.Component)),A={displayedSongs:[],detailedSong:{},detailedSongID:"",isDetail:!1,loading:!1,error:null},I=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state=Object(o.a)({},A),a.showDetail=function(e){var t=e.target.innerText,s=Object.entries(a.props.songs).filter(function(e){return e[1].name===t})[0];a.setState({isDetail:!1},function(){a.setState({detailedSong:s[1],detailedSongID:s[0],isDetail:!0})})},a.exitDetail=function(e){var t=document.querySelector(".halfModalBG"),s=document.querySelector(".exit");e.target!==t&&e.target!==s||a.setState({isDetail:!1,detailedSong:""})},a.addNewSong=function(){a.setState({detailedSong:{name:"",dob:"",status:"",vox:""},detailedSongID:"",isDetail:!0})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isDetail,a=e.detailedSong;return n.a.createElement("main",null,n.a.createElement(j,{onClick:this.showDetail,songs:this.props.songs,detailedSong:a,sharks:this.props.sharks,isFilterShowing:!0}),this.props.authUser&&n.a.createElement("button",{className:"newSongBtn",onClick:this.addNewSong},"new song"),n.a.createElement(U,{delayTime:300,isMounted:t,songId:this.state.detailedSongID,firebase:this.props.firebase,songs:this.props.songs,song:a,exit:this.exitDetail,sharks:this.props.sharks,authUser:this.props.authUser}))}}]),t}(n.a.Component),F=function(e){var t=e.authUser,a=e.songs,s=e.setList,i=e.onDelete,r=e.onMoveUp,o=e.onMoveDown;"function"!==typeof s.map&&(s=[]);var l=function(e){return!t||0===e};return n.a.createElement("ol",{className:"gigList"},s.map(function(e,c){return n.a.createElement("li",{key:e},n.a.createElement("button",{type:"button"},c+1,") ",function(e){var t;return Object.entries(a).forEach(function(a){a[0]===e&&(t=a[1].name)}),t}(e)),n.a.createElement("button",{type:"button",disabled:!t,value:c,onClick:i},"x"),n.a.createElement("button",{type:"button",value:c,onClick:r,className:"hideForS",disabled:l(c)},"\u2191"),n.a.createElement("button",{type:"button",value:c,onClick:o,className:"hideForS",disabled:null===t||c===s.length-1},"\u2193"))}))},L={date:0,dateInput:"",hasChanged:!1,location:"",setList:[],isAddSong:!1,isEditLocation:!1},B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state=Object(o.a)({},L),a.onChange=function(e){var t;a.setState((t={},Object(S.a)(t,e.target.name,e.target.value),Object(S.a)(t,"hasChanged",!0),t))},a.onEdit=function(){var e=a.state,t=e.date,s=e.location,n=a.state.setList;n=n.join(","),a.props.firebase.db.ref("gigs/".concat(a.props.gigId)).update({date:t,location:s,setList:n}),a.setState({hasChanged:!1,isEditLocation:!1})},a.onMoveUp=function(e){var t=parseInt(e.target.value),s=a.state.setList,n=[s[t-1],s[t]];s[t]=n[0],s[t-1]=n[1],a.setState({setList:s,hasChanged:!0})},a.onMoveDown=function(e){var t=parseInt(e.target.value),s=a.state.setList,n=[s[t+1],s[t]];s[t]=n[0],s[t+1]=n[1],a.setState({setList:s,hasChanged:!0})},a.onDelete=function(e){var t=parseInt(e.target.value),s=a.state.setList;s.splice(t,1),a.setState({setList:s,hasChanged:!0})},a.onAddSong=function(){a.setState({isAddSong:!0})},a.onPushToSetList=function(e){var t,s=e.target.innerText;Object.entries(a.props.songs).forEach(function(e){e[1].name===s&&(t=e[0])});var n=a.state.setList;n.push(t),a.setState({setList:n,isAddSong:!1,hasChanged:!0})},a.onCreate=function(){var e=a.state.setList.join(","),t={date:a.state.date,location:a.state.location,setList:e};a.props.firebase.doCreateGig(t),a.props.exit()},a.processDate=function(e){if(""===e)return"";if("string"===typeof e)return new Date(e).getTime();if("number"===typeof e){var t=new Date(e),a=t.getMonth()+1;a=1===a.toString().length?"0"+a:a;var s=t.getFullYear(),n=t.getDate();return n=1===n.toString().length?"0"+n:n,"".concat(a,"/").concat(n,"/").concat(s)}},a.onDateChange=function(e){if(/^[0-1][0-9]\/[0-3][0-9]\/[1-2][0-9][0-9][0-9]$/.test(e.target.value)){var t=a.processDate(e.target.value);a.setState({date:t,hasChanged:!0})}else a.setState({date:"",dateInput:e.target.value})},a.toggleEditLocation=function(){a.props.authUser&&a.setState({isEditLocation:!0})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e;this.props.gig.setList&&this.props.gig.setList.length&&(e=this.props.gig.setList.split(",")),this.setState({date:this.props.gig.date,location:this.props.gig.location,setList:e||[]})}},{key:"render",value:function(){return n.a.createElement(k,{handleExit:this.props.exit,classNames:"gigWrapper",isUnmounting:this.props.isUnmounting},n.a.createElement("label",{className:"label gigLocation",onClick:this.toggleEditLocation},this.state.location?"":"location",!this.state.location||this.state.isEditLocation?n.a.createElement("input",{disabled:!this.props.authUser,name:"location",onChange:this.onChange,value:this.state.location,className:"input"}):n.a.createElement("p",{className:"gigLocation"},this.state.location)),n.a.createElement("label",{className:"label gigDate"},"date",n.a.createElement("input",{disabled:!this.props.authUser,name:"date",onChange:this.onDateChange,value:this.processDate(this.state.date)||this.state.dateInput,className:"input",placeholder:"mm/dd/yyyy"})),n.a.createElement("div",{className:"setListWrapper"},n.a.createElement("h3",null,"setlist"),n.a.createElement(F,{songs:this.props.songs,authUser:this.props.authUser,setList:this.state.setList,onMoveUp:this.onMoveUp,onMoveDown:this.onMoveDown,onDelete:this.onDelete}),this.props.authUser&&n.a.createElement("button",{onClick:this.onAddSong,type:"button",disabled:!this.props.authUser,className:"setListAddBtn"},"Add Song")),this.props.authUser&&n.a.createElement(C,{isEdit:!!this.props.gigId,className:"gigSubmit",title:"gig",handleCreate:this.onCreate,handleEdit:this.onEdit,createValidation:this.state.location,editValidation:this.state.hasChanged}),this.state.isAddSong&&n.a.createElement(N,null,n.a.createElement("div",{className:"modalBG"},n.a.createElement(j,{isFilterShowing:!1,className:"modalAllSongs",onClick:this.onPushToSetList,songs:Object.values(this.props.songs),sharks:this.props.sharks}))),n.a.createElement("button",{onClick:this.props.exit,className:"button exit"},">"))}}]),t}(n.a.Component),M=function(e){var t=e.gigs,a=e.detailedGig,s=e.showDetail,i=Object.entries(t).sort(function(e,t){return t[1].date-e[1].date});return n.a.createElement("ul",{className:"AllSongs gigList"},i.map(function(e){return n.a.createElement("li",{key:e[0]},n.a.createElement("button",{onClick:s,className:a===e[1]?"active":"",value:e[0]},n.a.createElement("span",{className:"gigDate"},function(e){if(!e)return"";var t=new Date(e),a=t.getMonth()+1;a=1===a.toString().length?"0"+a:a;var s=t.getFullYear();s-=2e3;var n=t.getDate();return n=1===n.toString().length?"0"+n:n,"".concat(a,".").concat(n,".").concat(s," -")}(e[1].date)),n.a.createElement("span",{className:"gigLocation"},e[1].location)))}))},q=E(B),T={sortType:"",detailedGig:{},detailedGigID:"",isDetail:!1,loading:!1,error:null},G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state=Object(o.a)({},T),a.showDetail=function(e){var t=e.target.value?e.target.value:e.target.parentNode.value,s=Object.entries(a.props.gigs).filter(function(e){return e[0]===t})[0][1];a.setState({isDetail:!1},function(){a.setState({detailedGig:s,detailedGigID:t,isDetail:!0})})},a.exitDetail=function(e){var t=document.querySelector(".halfModalBG"),s=document.querySelector(".exit");e.target!==t&&e.target!==s||a.setState({isDetail:!1,detailedGig:{},detailedGigID:""})},a.addNewGig=function(){a.setState({detailedGig:{date:"",location:"",setList:[]},detailedGigID:"",isDetail:!0})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("main",null,n.a.createElement("div",{className:"mainWrapper"},n.a.createElement(M,{showDetail:this.showDetail,gigs:this.props.gigs,detailedGig:this.state.detailedGig})),this.props.authUser&&n.a.createElement("button",{className:"newSongBtn",onClick:this.addNewGig},"new gig"),n.a.createElement(q,{delayTime:300,isMounted:this.state.isDetail,gigId:this.state.detailedGigID,firebase:this.props.firebase,songs:this.props.songs,gig:this.state.detailedGig,exit:this.exitDetail,authUser:this.props.authUser,sharks:this.props.sharks}))}}]),t}(n.a.Component),R={name:"",sharkSince:0,favSongs:[],dateInput:"",isAddSong:!1,hasChanged:!1},W=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state=Object(o.a)({},R),a.handleChange=function(e){var t;a.setState((t={},Object(S.a)(t,e.target.name,e.target.value),Object(S.a)(t,"hasChanged",!0),t))},a.handleEdit=function(){var e=a.state.favSongs;e=e.join(","),a.props.firebase.db.ref("sharks/active/".concat(a.props.sharkId)).update({name:a.state.name,sharkSince:a.state.sharkSince,favSongs:e}),a.setState({hasChanged:!1})},a.processDate=function(e){if(""===e)return"";if("string"===typeof e)return new Date(e).getTime();if("number"===typeof e){var t=new Date(e),a=t.getMonth()+1;a=1===a.toString().length?"0"+a:a;var s=t.getFullYear(),n=t.getDate();return n=1===n.toString().length?"0"+n:n,"".concat(a,"/").concat(n,"/").concat(s)}},a.handleDateChange=function(e){if(/^[0-1][0-9]\/[0-3][0-9]\/[1-2][0-9][0-9][0-9]$/.test(e.target.value)){var t=a.processDate(e.target.value);a.setState({sharkSince:t,hasChanged:!0})}else a.setState({sharkSince:"",dateInput:e.target.value})},a.onMoveUp=function(e){var t=parseInt(e.target.value),s=a.state.favSongs,n=[s[t-1],s[t]];s[t]=n[0],s[t-1]=n[1],a.setState({favSongs:s,hasChanged:!0})},a.onMoveDown=function(e){var t=parseInt(e.target.value),s=a.state.favSongs,n=[s[t+1],s[t]];s[t]=n[0],s[t+1]=n[1],a.setState({favSongs:s,hasChanged:!0})},a.onDelete=function(e){var t=parseInt(e.target.value),s=a.state.favSongs;s.splice(t,1),a.setState({favSongs:s,hasChanged:!0})},a.onAddSong=function(){a.setState({isAddSong:!0})},a.onPushToFavSongs=function(e){var t,s=e.target.innerText;Object.entries(a.props.songs).forEach(function(e){e[1].name===s&&(t=e[0])});var n=a.state.favSongs;n.push(t),a.setState({favSongs:n,isAddSong:!1,hasChanged:!0})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e;this.props.shark.favSongs&&this.props.shark.favSongs.length&&(e=this.props.shark.favSongs.split(",")),this.setState({name:this.props.shark.name||"",sharkSince:this.props.shark.sharkSince||"",favSongs:e||[]})}},{key:"render",value:function(){var e=this.props.authUser&&this.props.authUser.uid===this.props.sharkId;return n.a.createElement(k,{handleExit:this.props.exit,classNames:"sharkWrapper",isUnmounting:this.props.isUnmounting},n.a.createElement("label",{className:"label l-95w sharkName"},"Name",n.a.createElement("input",{name:"name",onChange:this.handleChange,value:this.state.name,disabled:!e,className:"input"})),n.a.createElement("label",{className:"label l-95w sharkSince"},"Shark Since",n.a.createElement("input",{name:"date",onChange:this.handleDateChange,value:this.processDate(this.state.sharkSince)||this.state.dateInput,disabled:!e,placeholder:"mm/dd/yyyy",className:"input"})),n.a.createElement("div",{className:"sharksFavWrapper"},n.a.createElement("h3",null,"A Shark\u2019s ",n.a.createElement("br",null),"Dozen"),n.a.createElement(F,{songs:this.props.songs,authUser:this.props.authUser,setList:this.state.favSongs,onMoveUp:this.onMoveUp,onMoveDown:this.onMoveDown,onDelete:this.onDelete}),e&&n.a.createElement("button",{className:"sharksFavAddBtn",onClick:this.onAddSong,disabled:!this.props.authUser,type:"button"},"Add Song")),e&&n.a.createElement("button",{className:"sharkSubmit",type:"submit",onClick:this.handleEdit,disabled:!this.state.hasChanged||!e},"save edits"),this.state.isAddSong&&n.a.createElement(N,null,n.a.createElement("div",{className:"modalBG"},n.a.createElement(j,{isFilterShowing:!1,className:"modalAllSongs",onClick:this.onPushToFavSongs,songs:Object.values(this.props.songs),sharks:this.props.sharks}))),n.a.createElement("button",{type:"button",onClick:this.props.exit,className:"button exit"},">"))}}]),t}(n.a.Component),V=function(e){var t=e.sharks,a=e.detailedShark,s=e.showDetail,i=Object.entries(t.active),r=Object.entries(t.retired);return n.a.createElement("ul",{className:"AllSongs"},n.a.createElement("h3",null,"ACTIVE"),i.map(function(e){return n.a.createElement("li",{key:e[0]},n.a.createElement("button",{onClick:s,className:a===e[1]?"active":"",value:e[0]},e[1].name))}),n.a.createElement("h3",null,"RETIRED"),r.map(function(e){return n.a.createElement("li",{key:e[0]},n.a.createElement("button",{value:e[0]},e[1].name))}))},P=E(W),z={detailedShark:{},detailedSharkID:"",isDetail:!1},J=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state=Object(o.a)({},z),a.showDetail=function(e){var t=e.target.value,s=Object.entries(a.props.sharks.active).filter(function(e){return e[0]===t})[0][1];a.setState({isDetail:!1},function(){a.setState({detailedShark:s,detailedSharkID:t,isDetail:!0})})},a.exitDetail=function(e){var t=document.querySelector(".halfModalBG"),s=document.querySelector(".exit");e.target!==t&&e.target!==s||a.setState(Object(o.a)({},z))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("main",null,n.a.createElement(V,{sharks:this.props.sharks,showDetail:this.showDetail,detailedShark:this.state.detailedShark}),n.a.createElement(P,{delayTime:300,isMounted:this.state.isDetail,sharkId:this.state.detailedSharkID,firebase:this.props.firebase,songs:this.props.songs,sharks:this.props.sharks,shark:this.state.detailedShark,exit:this.exitDetail,authUser:this.props.authUser}))}}]),t}(n.a.Component),_={email:"",password:"",error:null,isPasswordSuccess:!1,isWaiting:!1},Y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state=Object(o.a)({},_),a.handleSubmit=function(e){e.preventDefault(),a.setState({isWaiting:!0});var t=a.state,s=t.email,n=t.password;a.props.firebase.doSignInWithEmailAndPassword(s,n).catch(function(e){a.setState({error:e,isWaiting:!1})})},a.handleForget=function(){a.setState({isWaiting:!0}),a.props.firebase.doPasswordReset(a.state.email).then(function(){return a.setState({isPasswordSuccess:!0,isWaiting:!1})}).catch(function(e){return a.setState({error:e,isWaiting:!1})})},a.handleChange=function(e){var t;a.setState((t={},Object(S.a)(t,e.target.name,e.target.value),Object(S.a)(t,"error",null),t))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,s=e.error,i=e.isPasswordSuccess,r=e.isWaiting,o=""===a||""===t;return n.a.createElement("div",{className:this.props.className},n.a.createElement("div",{className:i?"modalBoxInner isFlipped":"modalBoxInner"},n.a.createElement("form",{onSubmit:this.handleSubmit,className:"faceSignIn"},n.a.createElement("h3",null,"Sign in"),n.a.createElement("label",{className:r?"greyDisabled label":"label"},"email",n.a.createElement("input",{name:"email",value:t,disabled:r,className:"input",onChange:this.handleChange,type:"text",placeholder:"Email Address"})),n.a.createElement("label",{className:r?"greyDisabled label":"label"},"password",n.a.createElement("input",{disabled:r,name:"password",className:"input",value:a,onChange:this.handleChange,type:"password",placeholder:"Password"})),n.a.createElement("button",{disabled:o||r,type:"submit",className:"submit"},"Sign In"),n.a.createElement("button",{className:"passwordForget",onClick:this.handleForget,disabled:!t,type:"button"},"forgot your password?"),s&&n.a.createElement("p",null,s.message)),n.a.createElement("div",{className:"facePasswordSuccess"},n.a.createElement("h2",null,"SUCCESS"),n.a.createElement("p",null,"You will soon receive instructions to recover your account"))))}}]),t}(n.a.Component),H=function(e){var t=e.firebase,a=e.className;return n.a.createElement("button",{type:"button",className:a,onClick:t.doSignOut},"Sign Out")},K={songs:{},gigs:{},sharks:{},isLoadAnimation:!0,tab:"songs",isAuthDisplay:!1,authUser:null},Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).endAnimation=function(){a.setState({isLoadAnimation:!1})},a.onClickNav=function(e){a.setState({tab:e.target.value})},a.onShowSignIn=function(){a.setState({isAuthDisplay:!0})},a.renderSignInOrOut=function(){return a.state.authUser?n.a.createElement(H,{className:"userBtn",firebase:a.firebase}):n.a.createElement("button",{onClick:a.onShowSignIn,className:"userBtn"},"Sign In")},a.onModalClose=function(e){e.target===document.querySelector(".modalBG")&&a.setState({isAuthDisplay:!1})},a.renderMain=function(){switch(a.state.tab){case"songs":return n.a.createElement(I,{songs:a.state.songs,firebase:a.firebase,sharks:a.state.sharks,authUser:a.state.authUser});case"gigs":return n.a.createElement(G,{gigs:a.state.gigs,songs:a.state.songs,firebase:a.firebase,authUser:a.state.authUser,sharks:a.state.sharks});case"sharks":return n.a.createElement(J,{sharks:a.state.sharks,firebase:a.firebase,songs:a.state.songs,authUser:a.state.authUser});default:return n.a.createElement(I,{songs:a.state.songs,firebase:a.firebase,authUser:a.state.authUser})}},a.state=Object(o.a)({},K),a.firebase=new v,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.endAnimation()},3e3),this.firebase.db.ref("songs").on("value",function(t){e.setState({songs:t.val()})}),this.firebase.db.ref("gigs").on("value",function(t){e.setState({gigs:t.val()})}),this.firebase.db.ref("sharks").on("value",function(t){e.setState({sharks:t.val()})}),this.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t,isAuthDisplay:!1}):e.setState({authUser:null})})}},{key:"render",value:function(){var e=this.state,t=e.sharks,a=e.songs,s=e.gigs,i=e.isLoadAnimation,r=!t.hasOwnProperty("active")||!a.hasOwnProperty("aynrand")||"object"!==typeof s;return n.a.createElement("div",{className:"App"},(i||r)&&n.a.createElement(b,null),!r&&n.a.createElement("div",null,n.a.createElement(f,{onClickNav:this.onClickNav,tab:this.state.tab}),this.renderMain(),this.renderSignInOrOut(),this.state.isAuthDisplay&&n.a.createElement(N,null,n.a.createElement("div",{className:"modalBG",onClick:this.onModalClose},n.a.createElement(Y,{className:"modalBox",firebase:this.firebase})))))}}]),t}(s.Component);r.a.render(n.a.createElement(Q,null),document.getElementById("root"))},60:function(e,t,a){e.exports=a(117)},65:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.44bc4c4a.chunk.js.map